<template>
  <main class="relative pt-5 md:py-8">
    <WeddingInformation
      titleMsg="base.pageTitle"
      :weddingDate="$t('base.weddingDate')"
      :weddingPlace="information.place"
    />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="208"
      height="250"
      viewBox="0 0 208 250"
      fill="none"
      class="absolute top-36 hidden md:block"
    >
      <path
        d="M184.09 175.235C181.712 158.691 160.858 161.234 160.858 161.234L176.36 156.812C176.36 156.812 215.549 173.647 206.328 157.148C197.107 140.65 156.347 159.776 156.347 159.776C156.347 159.776 194.172 138.846 181.5 137.172C168.827 135.499 149.663 161.447 149.663 161.447C136.808 164.673 124.314 168.48 112.478 172.675C126.308 162.336 156.604 138.139 141.682 140.544C125.429 143.142 104.394 175.551 104.394 175.551C91.8681 180.102 80.1091 184.924 69.3292 189.718C84.5509 174.858 123.091 135.985 105 140.737C85.3581 145.918 65.5485 179.62 57.3044 195.188C54.3464 196.553 51.4213 197.961 48.5128 199.391C28.9185 208.989 14.7496 217.258 8.85049 220.797C12.3413 210.204 16.4653 199.728 21.2004 189.426C50.5642 180.737 83.0085 154.217 63.4328 153.56C50.5891 153.078 38.6284 162.198 30.762 170.08C39.0808 154.513 48.3487 139.324 58.5102 124.605C74.0013 119.643 121.112 103.758 107.262 95.1388C96.2797 88.3401 78.4369 101.808 67.7833 111.541C77.9776 97.5345 88.0904 84.9945 97.1803 74.3646C103.889 72.6742 149.563 60.7269 136.815 54.0763C128.851 49.8734 117.301 55.598 108.823 61.1036C122.459 45.8426 131.849 36.9702 131.849 36.9702C131.849 36.9702 184.76 16.5252 174.205 4.67466C163.65 -7.17592 131.762 30.6667 131.762 30.6667C121.882 39.9464 112.672 49.1605 104.041 58.2418C115.83 36.9916 137.785 -6.32618 118.294 1.30882C95.9559 10.0872 95.6368 55.5056 95.9237 67.0001C82.7535 81.3937 70.3278 96.368 58.7043 111.853C64.7624 89.0134 82.8572 15.0401 58.718 31.6306C30.3171 51.1282 50.9345 122.641 50.9345 122.641C38.5406 140.045 27.3276 158.095 17.3795 176.653C21.0632 156.206 28.971 100.549 4.17177 110.348C-26.169 122.214 9.64994 191.794 9.64994 191.794C-7.38221 227.146 -11.9788 249.385 -11.9788 249.385C-3.72808 252.444 2.85791 241.258 2.85791 241.258C3.57422 238.211 4.35762 235.148 5.19931 232.109C25.4079 217.851 46.8649 205.544 69.1888 195.408C73.6006 198.414 116.626 227.257 119.49 205.996C122.456 183.664 81.7249 189.822 81.5742 189.834C89.8075 186.262 97.921 182.953 105.789 179.899C117.017 183.086 162.767 195.363 154.022 179.803C148.54 170.044 136.92 170.17 127.656 172.233L151.854 164.058C151.854 164.058 186.484 191.801 184.09 175.235Z"
        fill="#567651"
        fill-opacity="0.4"
      />
    </svg>
    <WorkInProgress class="mt-16 hidden md:block" data-aos="zoom-in-up"/>
    <div class="absolute right-0 bottom-[26rem] hidden md:block">
      <div class="relative w-fit flex justify-center items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="33"
          viewBox="0 0 32 33"
          fill="none"
          class="absolute m-auto"
        >
          <path
            d="M12.8233 13.9472C12.8233 13.9472 9.71129 1.15229 16.4556 0.946359C23.2 0.740431 15.4349 15.4356 15.4266 14.7915C15.4182 14.1474 20.678 3.6595 28.3503 7.10894C36.0226 10.5584 16.8982 16.065 16.8982 16.065C16.8982 16.065 25.7142 12.4481 30.8532 17.1867C35.9921 21.9254 17.2585 17.9106 17.2585 17.9106C17.2585 17.9106 28.2765 19.2066 27.8916 25.4415C27.5068 31.6764 16.6615 18.6975 16.6615 18.6975C16.6615 18.6975 24.2908 30.5131 17.6906 32.0206C11.0904 33.528 14.3973 18.9345 14.3973 18.9345C14.3973 18.9345 13.2575 30.0494 7.18682 28.1228C1.11617 26.1962 12.7329 18.6206 12.7329 18.6206C12.7329 18.6206 1.2389 24.3561 1.19773 18.9404C1.15657 13.5247 11.014 16.9685 11.014 16.9685C11.014 16.9685 -3.05721 11.0166 1.97913 6.40852C7.01547 1.80044 12.8233 13.9472 12.8233 13.9472Z"
            fill="#E79F96"
          />
        </svg>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="111"
          height="100"
          viewBox="0 0 111 100"
          fill="none"
        >
          <path
            d="M45.0322 55.04C45.0322 55.04 -4.24735 61.3814 3.133 70.3229C10.5133 79.2645 49.9065 60.2427 49.9065 60.2427C49.9065 60.2427 22.296 82.1397 32.5933 88.6972C42.8906 95.2546 52.1737 62.9941 52.1737 62.9941C52.1737 62.9941 34.048 100.076 48.9008 99.1294C63.7535 98.1824 57.8409 61.7391 57.8409 61.7391C57.8409 61.7391 68.4964 96.9458 79.0796 94.8509C89.6628 92.7559 64.2193 59.2795 64.2193 59.2795C64.2193 59.2795 90.0611 89.3293 100.226 81.1906C110.39 73.052 65.2217 53.9642 65.2217 53.9642C65.2217 53.9642 105.121 72.1975 110.058 62.4197C114.995 52.642 67.5406 52.1848 67.5406 52.1848C67.5406 52.1848 116.253 47.8462 110.184 37.6526C104.114 27.459 64.7428 48.6159 64.7428 48.6159C64.7428 48.6159 108.409 29.9075 102.694 21.5905C96.9785 13.2735 62.3637 46.2076 62.3637 46.2076C62.3637 46.2076 96.626 11.3866 85.3033 6.94887C73.9805 2.51118 56.9701 45.8865 56.9701 45.8865C56.9701 45.8865 73.3049 -2.23173 57.4828 0.22451C41.6607 2.68075 53.1832 46.4359 53.1832 46.4359C53.1832 46.4359 37.9199 2.29657 27.4588 5.93516C16.9977 9.57375 49.9305 49.849 49.9305 49.849C49.9305 49.849 21.2821 14.4618 11.0346 18.7832C0.787111 23.1046 47.5659 50.4312 47.5659 50.4312C47.5659 50.4312 4.98189 32.0986 1.01841 42.7238C-2.94507 53.3491 45.0322 55.04 45.0322 55.04Z"
            fill="#F6CCC7"
            class="mx-auto"
          />
        </svg>
      </div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="171"
        height="163"
        viewBox="0 0 171 163"
        fill="none"
      >
        <path
          d="M131.85 16.7187C119.412 20.091 121.552 35.1914 121.552 35.1914L118.054 24.2142C118.054 24.2142 130.316 -6.28159 117.986 2.12297C105.657 10.5275 120.502 38.6546 120.502 38.6546C120.502 38.6546 104.33 12.8646 103.205 22.3566C102.08 31.8487 121.832 43.4102 121.832 43.4102C124.4 52.5564 127.401 61.379 130.689 69.6799C122.752 60.514 104.2 40.5862 106.171 51.3338C108.302 63.0429 132.942 75.3483 132.942 75.3483C136.504 84.122 140.263 92.3046 143.99 99.7692C132.633 90.0219 102.936 65.4652 106.71 78.315C110.823 92.2649 136.424 103.542 148.239 108.084C149.299 110.127 150.391 112.142 151.5 114.143C158.939 127.625 165.321 137.243 168.05 141.238C160.033 139.707 152.097 137.699 144.286 135.223C137.425 114.462 117.1 93.1808 116.815 107.654C116.59 117.155 123.588 125.065 129.609 130.082C117.794 125.485 106.253 120.152 95.0557 114.116C91.1519 103.2 78.6806 70.0812 72.3361 81.1206C67.3323 89.8707 77.6689 101.684 85.115 108.571C74.4546 102.441 64.8998 96.2265 56.7948 90.5779C55.4495 85.8056 45.96 53.3578 41.0867 63.3936C38.0059 69.6671 42.4421 77.6077 46.6804 83.3085C35.0381 74.7674 28.2538 68.7255 28.2538 68.7255C28.2538 68.7255 12.2854 31.7841 3.47141 40.7153C-5.34258 49.6465 23.5063 69.408 23.5063 69.408C30.6026 75.7701 37.6424 81.6456 44.5759 87.1084C28.4416 80.5143 -4.42526 68.6009 1.53513 82.199C8.38736 97.7806 42.6047 93.5628 51.2606 92.2248C62.2445 100.508 73.6579 108.186 85.4477 115.223C68.1773 113.003 12.2588 106.936 25.0153 123.078C40.0072 142.071 93.6575 119.885 93.6575 119.885C106.901 127.301 120.618 133.785 134.705 139.288C119.262 138.581 77.2507 138.217 84.8979 155.51C94.162 176.679 146.193 143.493 146.193 143.493C173.007 152.564 189.809 153.767 189.809 153.767C192.025 147.394 183.527 143.643 183.527 143.643C181.225 143.415 178.909 143.138 176.61 142.817C165.653 129.34 156.152 114.753 148.277 99.3147C150.495 95.7727 171.761 61.2755 155.715 61.252C138.86 61.2579 143.935 90.635 143.946 90.7447C141.167 85.0348 138.587 79.3872 136.202 73.895C138.483 65.3186 147.241 30.4398 135.613 38.4021C128.32 43.394 128.54 51.9347 130.193 58.5511L123.775 41.5418C123.775 41.5418 144.303 13.3322 131.85 16.7187Z"
          fill="#567651"
          fill-opacity="0.4"
        />
      </svg>
    </div>
    <ImagesSection :coupleImages="images" class="mt-8" />
    <WorkInProgress class="mt-8 md:hidden" data-aos="zoom-in-up"/>
    <NewsletterForm
      class="mt-24 m-auto"
      @submit-error="(message) => (errorMessage = message)"
    />
    <div
      class="fixed left-2/4 -translate-x-2/4 bottom-3"
      v-if="errorMessage"
    >
      <span
        class="p-3 text-xs text-red-800 rounded-lg bg-red-50 dark:bg-gray-800/80 dark:text-red-400"
        role="alert"
      >
        {{ $t(errorMessage) }} 
      </span>
    </div>
  </main>
</template>

<script>
import WeddingInformation from "../components/WeddingInformation.vue";
import ImagesSection from "../components/ImagesSection.vue";
import WorkInProgress from "../components/WorkInProgress.vue";
import NewsletterForm from "../components/NewsletterForm.vue";
import { reactive, ref, watch, onMounted } from "vue";
import { useI18n } from 'vue-i18n';

export default {
  name: "TheHome",
  components: {
    WeddingInformation,
    ImagesSection,
    WorkInProgress,
    NewsletterForm,
  },
  setup() {
    const { t: $t } = useI18n();
    const information = reactive({
      title: "Georgi & Eli Wedding",
      date: "July 20, 2024",
      place: "El Salvador",
    });
    const images = reactive([
      "foto-1-web.webp",
      "foto-2-web.webp",
      "foto-3-web.webp",
      "foto-4-web.webp",
    ]);
    let errorMessage = ref(null);

    function removeAlert() {
      errorMessage.value = null;
    }
    watch(errorMessage, (newValue) => {
      if (newValue) {
        setTimeout(removeAlert, 4000);
      }
    });

    const updatePageTitle =  () => {
      const pageTitle = `${$t('base.pageTitles.saveTheDate')} - G&C`  || "Default Page Title";
      document.title = pageTitle;
    };
    onMounted(() => {
      updatePageTitle()
    });

    return {
      information,
      images,
      errorMessage,
    };
  },
};
</script>
